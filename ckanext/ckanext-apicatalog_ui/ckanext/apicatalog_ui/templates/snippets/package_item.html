{% ckan_extends %}

{% block package_item %}
  <li class="dataset-item">
    <a href="{{ h.url_for(controller='package', action='read', id=package.name) }}">
      <div class="container-fluid">
        <div class="row">
          {% block content %}
            <div class="col-xs-8">
              <div class="dataset-content">
                {% block heading %}
                  <h3 class="dataset-heading">
                    {% block heading_private %}
                      {% if package.private %}
                        <span class="dataset-private label label-inverse">
                          <i class="icon-lock"></i>
                          {{ _('Private') }}
                        </span>
                      {% endif %}
                    {% endblock %}
                    <span>{{title}}</span>
                    {% block heading_meta %}
                      {% if package.get('state', '').startswith('draft') %}
                        <span class="label label-info">{{ _('Draft') }}</span>
                      {% elif package.get('state', '').startswith('deleted') %}
                        <span class="label label-important">{{ _('Deleted') }}</span>
                      {% endif %}
                      {{ h.popular('recent views', package.tracking_summary.recent, min=10) if package.tracking_summary }}
                    {% endblock %}
                  </h3>
                {% endblock %}
                {% block banner %}
                  {% if banner %}
                    <span class="banner">{{ _('Popular') }}</span>
                  {% endif %}
                {% endblock %}
                {% block notes %}
                  {% if notes %}
                    <div>{{ notes|urlize }}</div>
                  {% else %}
                    <p class="empty">{{ _("This dataset has no description") }}</p>
                  {% endif %}
                {% endblock %}
              </div>
            </div>
            <div class="col-xs-4">
              {% block resources %}
                {% if package.resources and not hide_resources %}
                  {% block resources_outer %}
                    <ul class="dataset-resources unstyled">
                      {% block resources_inner %}
                        {% for resource in h.dict_list_reduce(package.resources, 'format') %}
                        <li class="label" data-format="{{ resource.lower() }}">{{ resource }}
                        </li>
                        {% endfor %}
                      {% endblock %}
                    </ul>
                  {% endblock %}
                {% endif %}
              {% endblock %}
            </div>
          {% endblock %}
        </div>
      </div>
    </a>
  </li>
{% endblock %}
